/*! trac-script-v2.1.2 2017-02-28 */
!function(a,b){function c(){try{F(a);var b=G(W);da.pageSize.push(b),da.viewportResolution=H(W),da.wordCount=I(W),da.imageCount=K(W),L(),ea.appnexusIoId=da.appnexusIoId,ea.appnexusIp=da.appnexusIp,ea.appnexusAuctionId=da.appnexusAuctionId,ea.appnexusUid=da.appnexusUid,ea.screenResolution=da.screenResolution,ea.viewportResolution=da.viewportResolution,ea.cookieEnabled=da.cookieEnabled,ea.ver=Y,ea.creativeId=da.creativeId,_=setInterval(function(){M(),O()},T)}catch(a){N("init",a)}}function d(a,c,d){try{c=void 0!==c&&c;var e=b.getElementsByTagName("head")[0];c&&(e=W.document.getElementsByTagName("head")[0]);var f=b.createElement("script");f.type="text/javascript",f.src=a,f.onload=d,f.onreadystatechange=function(){"complete"==this.readyState&&d()},e.appendChild(f)}catch(a){N("load_script",a)}}function e(){try{Z=new SockJS(P+"eventbus/"),Z.onopen=function(){1===Z.readyState&&($=!0,ea.connectionMethod="WebSocket")},Z.onmessage=function(a){},Z.onclose=function(){$=!1,ea.connectionMethod="POST"}}catch(a){N("loadSockJS",a)}}function f(){try{ea.viewportResolution=H(W)}catch(a){N("resize",a)}}function g(c){try{var d,e,f;c=c||a.event,null===c.pageX&&null!==c.clientX&&(d=c.target&&c.target.ownerDocument||b,e=d.documentElement,f=d.body,c.pageX=c.clientX+(e&&e.scrollLeft||f&&f.scrollLeft||0),c.pageY=c.clientY+(e&&e.scrollTop||f&&f.scrollTop||0));var g={x:Math.round(c.pageX),y:Math.round(c.pageY),time:Date.now()};ea.mm.push(g)}catch(a){N("mousemove",a)}}function h(a){try{var b={x:a.pageX,y:a.pageY,time:Date.now()};ea.mcp.push(b)}catch(a){N("click",a)}}function i(a){try{aa.x=Math.round(a.touches[0].pageX),aa.y=Math.round(a.touches[0].pageY),aa.time=Date.now()}catch(a){N("touchstart",a)}}function j(){try{ba.length?ea.mm=ea.mm.concat(ba):ea.mcp.push(aa),aa={},ba=[]}catch(a){N("touchend",a)}}function k(a){try{ba.push({x:Math.round(a.touches[0].pageX),y:Math.round(a.touches[0].pageY),time:Date.now()})}catch(a){N("touchmove",a)}}function l(){try{ca.push("*")}catch(a){N("keypress",a)}}function m(){try{ea.browserTab=!1,X=setTimeout(function(){Z.close()},U)}catch(a){N("tabInactive",a)}}function n(){try{ea.browserTab=!0,$||e(),clearTimeout(X)}catch(a){N("tabActive",a)}}function o(a){try{a.top.document;return a.top}catch(a){return null}}function p(a){try{for(var b=P.split("//")[1],c=a.getElementsByTagName("script"),d=0;d<c.length;d++)if(c[d].src.toLowerCase().indexOf(b)!==-1)return decodeURIComponent(c[d].src.toLowerCase())}catch(a){N("getQueryString",a)}}function q(a,b){try{if(!b||!a)return null;a=a.toLowerCase(),b=b.toLowerCase();var c=a.match("[?&]"+b+"=([^&]+)");return c?c[1]:null}catch(a){N("getQueryParams",a)}}function r(a){try{return a.self===a.top?"top":"iframe"}catch(a){N("getInjectionPoint",a)}}function s(){try{var a=new Date,b=a.getFullYear().toString(),c=t(a.getUTCMonth()+1,2),d=t(a.getUTCDate(),2),e=t(a.getUTCHours(),2),f=t(a.getUTCMinutes(),2),g=t(a.getUTCSeconds(),2),h=t(a.getUTCMilliseconds(),3);return b+"-"+c+"-"+d+" "+e+":"+f+":"+g+"."+h}catch(a){N("getEventTime",a)}}function t(a,b){for(var c="",d=0;d<b;d++)c+="0";return c+=a,c.slice(-b)}function u(){try{var a=new Date;return a.getTimezoneOffset()}catch(a){N("getTimeZone",a)}}function v(a){try{a=a||navigator.userAgent;var b=w(a);if(b&&b.name)return b.name}catch(a){N("getBrowserName",a)}}function w(a){try{a=a||navigator.userAgent;var b=y(a),c={};return b.name&&(c.name=b.name,c.version=b.version),"chrome"===c.name?c.webkit=!0:"webkit"===c.name?c.name="safari":"mozilla"===c.name&&(c.name="firefox"),c}catch(a){N("getBrowserInfo",a)}}function x(a){return a.screen.availWidth+"x"+a.screen.availHeight}function y(a){try{a=a||navigator.userAgent,a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{name:b[1]||"",version:b[2]||"0"}}catch(a){N("userAgentMatch",a)}}function z(a){try{if(a.languages&&a.languages[0])return a.languages[0];if(a.language)return a.language;if(a.userLanguage)return a.userLanguage}catch(a){N("browserLanguage",a)}}function A(a,c){var d;try{if("top"===da.scriptInjectionPoint&&(d=b.location.href),!d&&W&&(d=W.document.URL),!d){var e=q(c,"url");e&&(d=decodeURI(e))}if(!d){for(var f=a;f.parent!==top;)f=f.parent;d=f.document.referrer}}catch(a){N("getPageURL",a),d=b.referrer}var g=d?d.toLowerCase():null;return!g||g.indexOf("doubleclick")===-1&&g.indexOf("google")===-1&&g.indexOf("adnxs")===-1||(d=""),d}function B(a){try{if(!a)return"";var b=a.split(/[//|/]+/);return b[1]}catch(a){N("getBaseURL",a)}}function C(a){try{if(!a)return"";var b=a.indexOf("//");b===-1?b=0:b+=2;var c=a.indexOf("/",b);c=c>=0?c:a.length;var d=a.substring(c+1,a.length),e=d.split(/[?:/|.|?|=|&|#|_|+|-]+/);return e.join()}catch(a){N("getKeywords",a)}}function D(a,b){try{var c=b.cookieEnabled;return c||(a.cookie="__XQzT=1",c=a.cookie.indexOf("__XQzT=1")!==-1),c}catch(a){N("isCookieEnabled",a)}}function E(a,b){try{var c=new XMLHttpRequest;return"withCredentials"in c?c.open(a,b,!0):"undefined"!=typeof XDomainRequest?(c=new XDomainRequest,c.open(a,b)):c=null,c}catch(a){N("createAjaxRequest",a)}}function F(a){try{for(var b=a;b.parent!==top;)b=b.parent;if(b=b.frameElement,!b){var c={top:"NA",left:"NA",size:da.creativeSize||Math.round(a.innerWidth)+" x "+Math.round(a.innerHeight)};return da.iframesPosition.push(c),da.adLocation.push(c),void(da.adCount=da.iframesPosition.length)}var d=b.getBoundingClientRect();da.adLocation.push({top:Math.round(d.top+W.pageYOffset),left:Math.round(d.left+W.pageXOffset),size:da.creativeSize||Math.round(d.width)+" x "+Math.round(d.height)});for(var e={},f=W.document.getElementsByTagName("iframe"),g=0;g<f.length;g++){var h=f[g];if(h){var i=h.id.toLowerCase();if(d=h.getBoundingClientRect(),d&&d.width>1&&d.height>1&&h.height>1&&h.width>1&&(i.indexOf("3rd party ad content")!==-1||i.indexOf("aswift_")!==-1||i.indexOf("google_ads_iframe_")!==-1||i.indexOf("ox_")!==-1||i.indexOf("sas_")!==-1||i.indexOf("oas_frame")!==-1||i.indexOf("cto_iframe")!==-1||i.indexOf("adtechAdContent_main_")!==-1||i.indexOf("ad_cs_")!==-1||i.indexOf("btg_unit_")!==-1||i.indexOf("frame_addoor-pubtag-")!==-1||i.indexOf("oas_frame_")!==-1)){var j={top:Math.round(d.top+W.pageYOffset),left:Math.round(d.left+W.pageXOffset),size:Math.round(d.width)+" x "+Math.round(d.height)},k=h.style["z-index"];k="none"!==k||!k||isNaN(parseInt(k))?0:parseInt(k);var l=j.top+"_"+j.left;if(e[l]){var m=e[l].z_index;m>k&&(e[l]={z_index:k,loc:j})}else e[l]={z_index:k,loc:j}}}}for(var n in e)da.iframesPosition.push(e[n].loc);0===da.iframesPosition.length&&0!==da.adLocation.length&&da.iframesPosition.push(da.adLocation[0]),da.adCount=da.iframesPosition.length}catch(a){N("setAdLocationsInfo",a)}}function G(a){try{var b=a.document.documentElement.scrollWidth||a.window.innerWidth,c=a.document.documentElement.scrollHeight||a.window.innerHeight;return{height:c,width:b}}catch(a){N("pageSize",a)}}function H(a){try{var b=a.document.querySelector("body"),c=a.innerWidth||a.document.documentElement.clientWidth||b.clientWidth,d=a.innerHeight||a.document.documentElement.clientHeight||b.clientHeight;return c+"x"+d}catch(a){N("getViewportResolution",a)}}function I(a){try{var b=a.document.querySelector("body");if(b){var c=b.innerText||J(a.document.body,a);c=c.replace(/\n/gi," ");var d=0;return/\S+/gi.test(c)&&(d=c.match(/\S+/gi).length),d}}catch(a){N("getWordCount",a)}}function J(b,c){try{c=c||a;var d,e,f,g,h=c.document;return c.getSelection&&h.createRange?(d=c.getSelection(),d.rangeCount&&(f=d.getRangeAt(0)),e=h.createRange(),e.selectNodeContents(b),d.removeAllRanges(),d.addRange(e),g=d.toString(),d.removeAllRanges(),f&&d.addRange(f)):h.body.createTextRange&&(e=h.body.createTextRange(),e.moveToElementText(b),e.select()),g}catch(a){N("getInnerText",a)}}function K(a){try{for(var b,c=a.document.getElementsByTagName("img"),d=0,e=c.length;d<e;d++){var f=c[d],g=f.clientWidth;if(g&&g>1){var h=f.getAttribute("src");h&&(h=h.toLowerCase(),h.indexOf(".jpg")===-1&&h.indexOf(".jpeg")===-1&&h.indexOf(".gif")===-1&&h.indexOf("png")===-1||(b=b?++b:1))}}return b}catch(a){N("getImageCount",a)}}function L(){try{var a=JSON.stringify(da.pageSize),b=JSON.stringify(da.adLocation),c=JSON.stringify(da.iframesPosition),d=P+"client-details?";for(var e in da)da[e]=encodeURIComponent(da[e]);var f="uid="+da.appnexusUid+"&ip="+da.appnexusIp+"&aid="+da.appnexusAuctionId+"&io="+da.appnexusIoId+"&ts="+da.eventTime+"&url="+da.pageURL+"&adv="+da.adCount+"&img="+da.imageCount+"&wc="+da.wordCount+"&con="+da.connectionMethod+"&br="+da.browserName+"&bl="+da.browserLanguage+"&sr="+da.screenResolution+"&vr="+da.viewportResolution+"&tab="+da.browserTab+"&ic="+da.cookieEnabled+"&adloc="+b+"&pSize="+a+"&cId="+da.creativeId+"&adPos="+c+"&ver="+Y+"&bUrl="+da.baseURL+"&kwrds="+da.keywords+"&tz="+da.timeZone+"&cs="+da.creativeSize+"&cpgid="+da.campaignId+"&devMId="+da.deviceModelId+"&injPoint="+da.scriptInjectionPoint+"&per="+da.permission,g=E("GET",d+f);g.send()}catch(a){N("sendUserDetail",a)}}function M(){try{if(ea.keyPressCount=ca.length,ea.Scroll=Math.round(W.pageYOffset)+","+Math.round(W.pageXOffset),ea.mm.length>0||ea.mcp.length>0||ea.keyPressCount>0)if($)ea.timeStamp=Date.now(),Z.send(JSON.stringify(ea));else{var a=P+"client-details2",b=E("POST",a);b.send(JSON.stringify(ea))}ea.timeSpent=ea.timeSpent+T,ea.mm=[],ea.mcp=[],ca=[]}catch(a){N("sendUserActivity",a)}}function N(a,b){var c={method:a,message:b.toString()},d=c.method+"_"+c.message;R&&!R[d]&&(S.push(c),R[d]=!0),_||O()}function O(){if(S&&S.length){var a=b.referrer;da&&da.pageURL&&(a=da.pageURL);var c={uid:da?da.appnexusUid:"NA",url:a,errors:S},d=P+"trac-err",e=E("POST",d);e.send(JSON.stringify(c)),S=[]}}try{var P="https://trac.mediaiqdigital.com/",Q="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.1.1/sockjs.min.js",R={},S=[],T=5e3,U=3e5,V=3e3,W=null,X=null,Y="2.1.2",Z=null,$=!1,_=null,aa={},ba=[],ca=[],da={appnexusIp:null,creativeId:null,campaignId:null,appnexusUid:null,creativeSize:null,appnexusIoId:null,deviceModelId:null,appnexusAuctionId:null,pageURL:null,baseURL:null,eventTime:null,imageCount:null,wordCount:null,connectionMethod:"GET",browserName:null,browserLanguage:null,screenResolution:null,viewportResolution:null,browserTab:!0,cookieEnabled:null,iframesPosition:[],adLocation:[],adCount:null,pageSize:[],keywords:null,timeZone:null,queryString:null,scriptInjectionPoint:null,permission:null},ea={appnexusUid:null,appnexusIp:null,appnexusAuctionId:null,appnexusIoId:null,connectionMethod:"POST",screenResolution:null,viewportResolution:null,browserTab:!0,cookieEnabled:null,timeSpent:5e3,timeStamp:null,keyPressCount:null,keys:[],mm:[],mcp:[],ver:null,Scroll:null,creativeId:null};if(b.cookie.toLowerCase().indexOf("opt-out=1")!==-1)return;W=o(a);var fa=da.queryString=p(b);if(da.pageURL=A(a,fa),da.appnexusUid=q(fa,"uid"),da.appnexusIp=q(fa,"ip"),da.creativeId=q(fa,"creativeid"),da.appnexusAuctionId=q(fa,"aid"),da.appnexusIoId=q(fa,"io"),da.creativeSize=q(fa,"creativesize"),da.campaignId=q(fa,"cpid"),da.deviceModelId=q(fa,"mod"),da.eventTime=s(),da.timeZone=u(),da.baseURL=B(da.pageURL),da.keywords=C(da.pageURL),da.browserName=v(navigator.userAgent),da.browserLanguage=z(navigator),da.cookieEnabled=D(b,navigator),da.screenResolution=x(a),da.scriptInjectionPoint=r(a),da.permission=W?"yes":"no",!W)return void L();d(Q,!1,e),"ontouchstart"in W.document.documentElement?(W.addEventListener("touchstart",i),W.addEventListener("touchend",j),W.addEventListener("touchmove",k)):(W.addEventListener("mousemove",g),W.addEventListener("click",h)),W.addEventListener("keypress",l),W.addEventListener("blur",m),W.addEventListener("focus",n),W.addEventListener("resize",f);var ga=setInterval(function(){"interactive"!==b.readyState&&"complete"!==b.readyState||(c(),clearInterval(ga))},V)}catch(a){N("main",a)}}(window,document);